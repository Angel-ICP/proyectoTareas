<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calculo</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/styles.css">
</head>

<body class="texto" style=" 
background-image: url(https://i.pinimg.com/originals/0c/d5/e1/0cd5e18c9186b79a746c0987447e98c8.jpg);
background-size: cover;
background-repeat: no-repeat;
background-position: center center;
">
  <header>
    <h1>Programacion</h1>
    <nav>
      <ul>
        <li><a href="/proyecto">Inicio</a></li>
        <!-- <li><a href="#">Sobre Nosotros</a></li>
        <li><a href="#">Servicios</a></li> -->
        <li><a href="/login/logout">Cerra Sesion</a></li>
      </ul>
    </nav>
  </header>
  
  <main class="estadistica">
  <div class="container mt-5">
    <h1 class="text-center">Gestión de Tareas</h1>
    <div class="d-flex justify-content-end mb-3">
      <button type="button" class="btn btn-success" data-toggle="modal" data-target="#addCalculo">Añadir
        Trabajo</button>
    </div>
    <table  class=" texto table table-border">
      <thead class="thead-dark">
        <tr>
          <td>ID</td>
          <td>Trabajo</td>
          <td>Fecha de Inicio</td>
          <td>Fecha de Entrega</td>
          <td>Estado</td>
          <td>Parcial</td>
          <td>Calificacion</td>
          <td>Valor del Trabajo</td>
        </tr>
      </thead>
      <tbody>
        <% programacion.forEach(materiaProg=> { %>
          <tr>
            <td> <%= materiaProg.id %> </td>
            <td> <%= materiaProg.nombre %> </td>
            <td> <%= materiaProg.fecha %> </td>
            <td> <%= materiaProg.fecha_termina %> </td>
            <td> <%= materiaProg.estado %> </td>
            <td> <%= materiaProg.parcial %> </td>
            <td> <%= materiaProg.calificacion %> </td>
            <td> <%= materiaProg.valor_cal %> </td>
            <td>
              <button class="btn btn-warning btn-sm" data-toggle="modal"
                data-target="#editCalculo<%= materiaProg.id %>">Editar</button>
              <a href="/proyecto/programacion/delete/<%= materiaProg.id %>"
                class="btn btn-danger btn-sm">Borrar</a>
            </td>
          </tr>


          <% }) %>
      </tbody>
    </table>
  </div>

  <!-- Modal para agregar proveedor -->
  <div class="modal fade" id="addCalculo" tabindex="-1" role="dialog" aria-labelledby="addCalculoModal"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div style="background-color: rgba(131, 131, 170, 0.849);" class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="addCalculoModal">Agregar Trabajo</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form action="/proyecto/programacion/add" method="POST">
            <div class="form-group">
              <label for="nombre">Nombre del trabajo:</label>
              <input type="text" class="form-control" id="nombre" name="nombre" required>
            </div>
            <div class="form-group">
              <label for="fecha">Fecha de Inicio:</label>
              <input type="date" class="form-control" id="fecha" name="fecha" required>
            </div>
            <div class="form-group">
              <label for="fecha_termina">Fecha de Entrega:</label>
              <input type="date" class="form-control" id="fecha_termina" name="fecha_termina" required>
            </div>
            <div class="form-group">
              <label for="estado">Estado del trabajo:</label>
              <select id="estado" name="estado" required>
                <option value="Pendiente">Pendiente</option>
                <option value="Entregado">Entregado</option>
                <option value="No Entregado">No Entregado</option>
              </select>
            </div>
            <div class="form-group">
              <label for="parcial">Parcial:</label>
              <select id="parcial" name="parcial" required>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
              </select>
            </div>
            <div class="form-group">
              <label for="calificacion">Calificacion:</label>
              <input type="number" class="form-control" id="calificacion" name="calificacion" required>
            </div>
            <div class="form-group">
              <label for="valor_cal">Valor del Trabajo:</label>
              <input type="number" class="form-control" id="valor_cal" name="valor_cal" required>
            </div>

            <button type="submit" class="btn btn-primary">Agregar</button>
          </form>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal para editar trabajo -->
  <% programacion.forEach(materiaProg=> { %>

  <div class="modal fade" id="editCalculo<%= materiaProg.id %>" tabindex="-1" role="dialog"
    aria-labelledby="editCalculoLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div style="background-color: rgba(131, 131, 170, 0.849);"  class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="editCalculoLabel">Editar Proveedor</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form action="/proyecto/programacion/edit/<%= materiaProg.id %>" method="POST">
            <div class="form-group">
              <label for="nombre">Nombre del trabajo:</label>
              <input type="text" class="form-control" id="nombre" value="<%= materiaProg.nombre %>" name="nombre" required>
            </div>
            <div class="form-group">
              <label for="fecha">Fecha de Inicio:</label>
              <input type="date" class="form-control" id="fecha" value="<%= materiaProg.fecha %>" name="fecha" required>
            </div>
            <div class="form-group">
              <label for="fecha_termina">Fecha de Entrega:</label>
              <input type="date" class="form-control" id="fecha_termina" value="<%= materiaProg.fecha_termina %>" name="fecha_termina" required>
            </div>
            <div class="form-group">
              <label for="estado" >Estado del trabajo:</label>
              <select id="estado" name="estado" required>
                <option value="Pendiente" <%= materiaProg.estado = 'Pendiente' ? 'selected' : '' %>>Pendiente</option>
                <option value="Entregado" <%= materiaProg.estado = 'Entregado' ? 'selected' : '' %>>Entregado</option>
                <option value="No Entregado" <%= materiaProg.estado = 'No Entregado' ? 'selected' : '' %>>No Entregado</option>
            </select>
            </div>
            <div class="form-group">
              <label for="parcial" >Estado del trabajo:</label>
              <select id="parcial" name="parcial" required>
                <option value="1" <%= materiaProg.parcial = '1' ? 'selected' : '' %>>1</option>
                <option value="2" <%= materiaProg.parcial = '2' ? 'selected' : '' %>>2</option>
                <option value="3" <%= materiaProg.parcial = '3' ? 'selected' : '' %>>3</option>
            </select>
            </div>
            <div class="form-group">
              <label for="calificacion">Calificacion:</label>
              <input type="number" class="form-control" id="calificacion" value="<%= materiaProg.calificacion %>" name="calificacion" required>
            </div>
            <div class="form-group">
              <label for="valor_cal">Calificacion:</label>
              <input type="number" class="form-control" id="valor_cal" value="<%= materiaProg.valor_cal %>" name="valor_cal" required>
            </div>

            <button type="submit" class="btn btn-primary">Editar</button>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>
  <% }) %>
    </tbody>
</main>
    <footer>
      <p>&copy; 2024 Mi Sitio Web. Todos los derechos reservados.</p>
    </footer>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>


</html>